--// ===============================
--// COREX HUB | WINDUI
--// ===============================

--// SERVICES
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer

--// WINDUI LOAD
local cloneref = (cloneref or clonereference or function(i) return i end)
local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

--// WINDOW
local Window = WindUI:CreateWindow({
    Title = "Corex Hub",
    Folder = "corexhub",
    NewElements = true,
})

--// ===============================
--// CONFIG USAGE (KEPT)
--// ===============================
local ConfigUsageSection = Window:Section({
    Title = "Config Usage",
})

--// CONFIG ELEMENTS TAB
local ConfigElementsTab = ConfigUsageSection:Tab({
    Title = "Config Elements",
    Border = true,
})

ConfigElementsTab:Toggle({
    Flag = "ExampleToggle",
    Title = "Example Toggle",
    Value = false,
})

ConfigElementsTab:Slider({
    Flag = "ExampleSlider",
    Title = "Example Slider",
    Value = {
        Min = 0,
        Max = 100,
        Default = 50,
    },
})

--// CONFIG MANAGER TAB
local ConfigTab = ConfigUsageSection:Tab({
    Title = "Configs",
    Border = true,
})

local ConfigManager = Window.ConfigManager
local ConfigName = "default"

-- Input for config name
ConfigTab:Input({
    Title = "Config Name",
    Value = ConfigName,
    Callback = function(value)
        ConfigName = value
    end
})

-- Dropdown to select existing configs
local ConfigDropdown
local function RefreshConfigList()
    local allConfigs = ConfigManager:AllConfigs() or {}
    local options = {}
    for _, name in ipairs(allConfigs) do
        table.insert(options, name)
    end
    if #options == 0 then
        table.insert(options, "No configs found")
    end
    
    if ConfigDropdown then
        ConfigDropdown:Update(options)  -- Assuming WindUI Dropdown has :Update or similar; fallback to recreate if needed
    else
        ConfigDropdown = ConfigTab:Dropdown({
            Title = "Select Config",
            Options = options,
            Default = table.find(options, ConfigName) and ConfigName or options[1],
            Callback = function(selected)
                ConfigName = selected
                -- Optional: auto-load on select
                -- Window.CurrentConfig = ConfigManager:Config(ConfigName)
                -- Window.CurrentConfig:Load()
            end
        })
    end
end

-- Initial refresh
task.spawn(RefreshConfigList)

ConfigTab:Button({
    Title = "Refresh List",
    Justify = "Center",
    Callback = RefreshConfigList
})

ConfigTab:Button({
    Title = "Save Config",
    Justify = "Center",
    Callback = function()
        if ConfigName == "" or ConfigName == "No configs found" then
            warn("[Corex Hub] Enter a valid config name first!")
            return
        end
        
        local config = ConfigManager:Config(ConfigName)  -- creates if not exists
        Window.CurrentConfig = config
        
        local success, err = pcall(function()
            config:Save()
        end)
        
        if success then
            print("[Corex Hub] Saved config: " .. ConfigName)
            RefreshConfigList()  -- update dropdown
        else
            warn("[Corex Hub] Save failed: " .. tostring(err))
        end
    end
})

ConfigTab:Button({
    Title = "Load Config",
    Justify = "Center",
    Callback = function()
        if ConfigName == "" or ConfigName == "No configs found" then
            warn("[Corex Hub] Select or enter a config name first!")
            return
        end
        
        local config = ConfigManager:Config(ConfigName)
        Window.CurrentConfig = config
        
        local success, err = pcall(function()
            config:Load()
        end)
        
        if success then
            print("[Corex Hub] Loaded config: " .. ConfigName)
        else
            warn("[Corex Hub] Load failed: " .. tostring(err))
        end
    end
})

ConfigTab:Button({
    Title = "Delete Config",
    Justify = "Center",
    Callback = function()
        if ConfigName == "" or ConfigName == "No configs found" then
            warn("[Corex Hub] Select a config to delete!")
            return
        end
        
        local success, err = pcall(function()
            ConfigManager:DeleteConfig(ConfigName)
        end)
        
        if success then
            print("[Corex Hub] Deleted config: " .. ConfigName)
            ConfigName = "default"
            RefreshConfigList()
        else
            warn("[Corex Hub] Delete failed: " .. tostring(err))
        end
    end
})

--// ===============================
--// TECH TAB
--// ===============================

local TechTab = Window:Tab({
    Title = "Tech",
    Icon = "zap",
})

--// ===============================
--// LETHAL DASH (TOGGLE)
--// ===============================

-- LETHAL DASH SETTINGS
local TARGET_ANIMATION_LD = "rbxassetid://12296113986"
local BOOST_POWER_LD = 64
local AIM_DURATION_LD = 0.74
local PREDICTION_MULTIPLIER_LD = 0.22
local DASH_KEY_LD = Enum.KeyCode.Q
local MOVE_KEY_LD = Enum.KeyCode.W

-- LETHAL DASH STATE
local EnabledLD = false
local AnimationConnectionLD
local CharacterConnectionLD

--// ===============================
--// ZERO TECH (NEW FEATURE)
--// ===============================

-- ZERO TECH SETTINGS
local TARGET_ANIMATION_ZT = "rbxassetid://10503381238"
local BOOST_POWER_ZT = 63
local AIM_DURATION_ZT = 0.74
local PREDICTION_MULTIPLIER_ZT = 0.22
local DASH_KEY_ZT = Enum.KeyCode.Q
local MOVE_KEY_ZT = Enum.KeyCode.W
local NOCLIP_DURATION = 1

-- ZERO TECH STATE
local EnabledZT = false
local AnimationConnectionZT
local CharacterConnectionZT

--// ===============================
--// SHARED CORE FUNCTIONS
--// ===============================

local function BoostUp(character, power)
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.AssemblyLinearVelocity = Vector3.new(0, power, 0)
    end
end

local function GetClosestTarget(character)
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return nil end

    local closest, shortest = nil, math.huge  

    for _, obj in ipairs(workspace:GetDescendants()) do  
        if obj:IsA("Model") and obj ~= character then  
            local hum = obj:FindFirstChildOfClass("Humanoid")  
            local targetHRP = obj:FindFirstChild("HumanoidRootPart")  

            if hum and hum.Health > 0 and targetHRP then  
                local dist = (hrp.Position - targetHRP.Position).Magnitude  
                if dist < shortest then  
                    shortest = dist  
                    closest = obj  
                end  
            end  
        end  
    end  

    return closest
end

local function AimAtTarget(character, duration, prediction)
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not hrp then return end

    humanoid.AutoRotate = false  

    local lock  
    lock = humanoid:GetPropertyChangedSignal("AutoRotate"):Connect(function()  
        humanoid.AutoRotate = false  
    end)  

    local target = GetClosestTarget(character)  
    if not target then  
        humanoid.AutoRotate = true  
        lock:Disconnect()  
        return  
    end  

    local startTime = tick()  
    local conn  

    conn = RunService.RenderStepped:Connect(function()  
        if tick() - startTime <= duration then  
            local targetHRP = target:FindFirstChild("HumanoidRootPart")  
            if targetHRP then  
                local predicted =  
                    targetHRP.Position +  
                    targetHRP.AssemblyLinearVelocity * prediction  

                hrp.CFrame = CFrame.lookAt(  
                    hrp.Position,  
                    Vector3.new(predicted.X, hrp.Position.Y, predicted.Z)  
                )  
            end  
        else  
            conn:Disconnect()  
            lock:Disconnect()  
            humanoid.AutoRotate = true  
        end  
    end)
end

local function FireDash(character, dashKey, moveKey)
    local args = {  
        {  
            Dash = moveKey,  
            Key = dashKey,  
            Goal = "KeyPress",  
        },  
    }  

    local comm = character:FindFirstChild("Communicate")  
    if comm then  
        comm:FireServer(unpack(args))  
    end
end

--// ===============================
--// ZERO TECH SPECIFIC FUNCTIONS
--// ===============================

local function ToggleCollision(character, state)
    for _, part in ipairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = state
        end
    end
end

local function TemporaryNoClip(character)
    ToggleCollision(character, false)
    task.wait(NOCLIP_DURATION)
    ToggleCollision(character, true)
end

--// ===============================
--// LETHAL DASH CHARACTER SETUP
--// ===============================

local function SetupLethalDash(character)
    if AnimationConnectionLD then
        AnimationConnectionLD:Disconnect()
        AnimationConnectionLD = nil
    end

    local humanoid = character:WaitForChild("Humanoid")  

    AnimationConnectionLD = humanoid.AnimationPlayed:Connect(function(anim)  
        if not EnabledLD then return end  
        if anim.Animation and anim.Animation.AnimationId == TARGET_ANIMATION_LD then  
            task.wait(1.7)  

            BoostUp(character, BOOST_POWER_LD)  
            AimAtTarget(character, AIM_DURATION_LD, PREDICTION_MULTIPLIER_LD)  
            FireDash(character, DASH_KEY_LD, MOVE_KEY_LD)
        end  
    end)
end

--// ===============================
--// ZERO TECH CHARACTER SETUP
--// ===============================

local function SetupZeroTech(character)
    if AnimationConnectionZT then
        AnimationConnectionZT:Disconnect()
        AnimationConnectionZT = nil
    end

    local humanoid = character:WaitForChild("Humanoid")  

    AnimationConnectionZT = humanoid.AnimationPlayed:Connect(function(anim)  
        if not EnabledZT then return end  
        if anim.Animation and anim.Animation.AnimationId == TARGET_ANIMATION_ZT then  
            task.wait(0.3)  

            task.spawn(function()  
                TemporaryNoClip(character)  
            end)  

            BoostUp(character, BOOST_POWER_ZT)  
            AimAtTarget(character, AIM_DURATION_ZT, PREDICTION_MULTIPLIER_ZT)  
            FireDash(character, DASH_KEY_ZT, MOVE_KEY_ZT)
        end  
    end)
end

--// ===============================
--// LETHAL DASH SYSTEM CONTROL
--// ===============================

local function EnableLethalDash(state)
    EnabledLD = state

    if state then  
        if LocalPlayer.Character then  
            SetupLethalDash(LocalPlayer.Character)  
        end  

        CharacterConnectionLD = LocalPlayer.CharacterAdded:Connect(function(char)  
            task.wait(0.5)  
            SetupLethalDash(char)  
        end)  
    else  
        if AnimationConnectionLD then
            AnimationConnectionLD:Disconnect()
            AnimationConnectionLD = nil
        end
        if CharacterConnectionLD then
            CharacterConnectionLD:Disconnect()
            CharacterConnectionLD = nil
        end
    end
end

--// ===============================
--// ZERO TECH SYSTEM CONTROL
--// ===============================

local function EnableZeroTech(state)
    EnabledZT = state

    if state then  
        if LocalPlayer.Character then  
            SetupZeroTech(LocalPlayer.Character)  
        end  

        CharacterConnectionZT = LocalPlayer.CharacterAdded:Connect(function(char)  
            task.wait(0.5)  
            SetupZeroTech(char)  
        end)  
    else  
        if AnimationConnectionZT then
            AnimationConnectionZT:Disconnect()
            AnimationConnectionZT = nil
        end
        if CharacterConnectionZT then
            CharacterConnectionZT:Disconnect()
            CharacterConnectionZT = nil
        end
    end
end

--// ===============================
--// TECH UI
--// ===============================

TechTab:Toggle({
    Title = "Lethal Dash",
    Desc = "Lethal Dash",
    Value = false,
    Callback = function(state)
        EnableLethalDash(state)
    end
})

TechTab:Toggle({
    Title = "Zero Tech",
    Desc = "Does it for you",
    Value = false,
    Callback = function(state)
        EnableZeroTech(state)
    end
})

--// ===============================
--// SUPA TECH (LEGIT)
--// ===============================

local SupaTechLoaded = false

TechTab:Toggle({
    Title = "Supa Tech (Legit)",
    Desc = "Loads external Supa Tech script",
    Value = false,
    Callback = function(state)
        if state and not SupaTechLoaded then
            SupaTechLoaded = true  -- prevent multiple loads
            local success, result = pcall(function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/tracy738/Hillo/main/SupaTech.lua"))()
            end)
            if not success then
                warn("[Corex Hub] Supa Tech failed to load: " .. tostring(result))
            end
        elseif not state then
            -- Optional: attempt cleanup (Supa Tech creates "SupaTechGUI" ScreenGui)
            local pgui = LocalPlayer:FindFirstChild("PlayerGui")
            if pgui then
                for _, obj in ipairs(pgui:GetChildren()) do
                    if obj:IsA("ScreenGui") and obj.Name == "SupaTechGUI" then
                        obj:Destroy()
                    end
                end
            end
            SupaTechLoaded = false  -- allow reload if toggled back on
        end
    end,
})

--// ===============================
--// ANTI KICK TAB
--// ===============================

local AntiTab = Window:Tab({
    Title = "Anti Kick",
    Icon = "shield",
})

local AntiKickEnabled = false
local old_namecall
local oldKick
local restoreFuncs = {}

local function EnableAntiKick()
    if AntiKickEnabled then return end
    AntiKickEnabled = true

    local Players = game:GetService("Players")
    local lp = Players.LocalPlayer
    local mt = getrawmetatable(game)

    -- store originals
    restoreFuncs.old_namecall = restoreFuncs.old_namecall or mt.__namecall
    restoreFuncs.oldKick = restoreFuncs.oldKick or lp.Kick

    if hookmetamethod then
        old_namecall = hookmetamethod(game, "__namecall", newcclosure(function(self, ...)
            local method = getnamecallmethod()

            if (self == lp) and (method == "Kick" or method == "kick") then
                warn("[anti-kick] Blocked Kick(\"" .. tostring(...) .. "\")")
                return
            end

            return restoreFuncs.old_namecall(self, ...)
        end))
    else
        setreadonly(mt, false)
        mt.__namecall = newcclosure(function(self, ...)
            local method = getnamecallmethod()

            if (self == lp) and (method == "Kick" or method == "kick") then
                warn("[anti-kick fallback] Blocked Kick")
                return
            end

            return restoreFuncs.old_namecall(self, ...)
        end)
        setreadonly(mt, true)
    end

    if lp.Kick then
        oldKick = hookfunction(lp.Kick, function(self, reason)
            warn("[anti-kick] Blocked direct :Kick(\"" .. tostring(reason) .. "\")")
        end)
    end

    -- hide kick GUI
    task.spawn(function()
        while AntiKickEnabled do
            task.wait(0.7)
            for _, v in game:GetService("CoreGui"):GetDescendants() do
                if v:IsA("TextLabel") or v:IsA("TextButton") then
                    local txt = v.Text:lower()
                    if txt:find("kick") or txt:find("ban") or txt:find("exploit") then
                        v.Visible = false
                        v.Text = ""
                    end
                end
            end
        end
    end)

    print("[anti-kick] Enabled")
end

local function DisableAntiKick()
    if not AntiKickEnabled then return end
    AntiKickEnabled = false

    local mt = getrawmetatable(game)
    local Players = game:GetService("Players")
    local lp = Players.LocalPlayer

    setreadonly(mt, false)
    if restoreFuncs.old_namecall then
        mt.__namecall = restoreFuncs.old_namecall
    end
    setreadonly(mt, true)

    if restoreFuncs.oldKick then
        hookfunction(lp.Kick, restoreFuncs.oldKick)
    end

    print("[anti-kick] Disabled â†’ restored metamethods")
end

AntiTab:Toggle({
    Title = "Anti Kick",
    Desc = "Blocks client-side kick attempts",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiKick()
        else
            DisableAntiKick()
        end
    end
})

--// ===============================
--// AUTO TAB
--// ===============================

local AutoTab = Window:Tab({
    Title = "Auto",
    Icon = "repeat",
})

local AutoUppercutEnabled = false
local UppercutConnection = nil
local CharacterAddedConnection = nil

-- animation list
local targetAnimations = {
    ["13532604085"] = true,
    ["15240176873"] = true,
    ["16515448089"] = true,
    ["10469639222"] = true,
    ["17889471098"] = true,
    ["14001963401"] = true,
    ["13378751717"] = true,
    ["13295919399"] = true
}

-- fire space key
local function FireUppercutKey(character)
    local comm = character:FindFirstChild("Communicate")
    if not comm then return end

    pcall(function()
        comm:FireServer({
            Goal = "KeyPress",
            Key = Enum.KeyCode.Space
        })
    end)
end

-- setup auto uppercut on character
local function SetupUppercut(character)
    if UppercutConnection then
        UppercutConnection:Disconnect()
        UppercutConnection = nil
    end

    task.spawn(function()
        local humanoid = character:WaitForChild("Humanoid")
        UppercutConnection = humanoid.AnimationPlayed:Connect(function(track)
            if not AutoUppercutEnabled then return end

            local id = track.Animation.AnimationId:gsub("rbxassetid://", "")
            if targetAnimations[id] then
                FireUppercutKey(character)
                task.wait(0.10)
                FireUppercutKey(character)
            end
        end)
    end)
end

-- enable/disable system
local function EnableAutoUppercut(state)
    AutoUppercutEnabled = state

    local lp = Players.LocalPlayer

    if state then
        -- setup current character
        if lp.Character then
            SetupUppercut(lp.Character)
        end

        -- handle respawn
        CharacterAddedConnection = lp.CharacterAdded:Connect(function(char)
            task.wait(0.5)
            SetupUppercut(char)
        end)
    else
        -- disable all
        if UppercutConnection then
            UppercutConnection:Disconnect()
            UppercutConnection = nil
        end
        if CharacterAddedConnection then
            CharacterAddedConnection:Disconnect()
            CharacterAddedConnection = nil
        end
    end
end

-- UI Toggle
AutoTab:Toggle({
    Title = "Auto Uppercut",
    Desc = "Automatic Uppercut For You",
    Value = false,
    Callback = function(state)
        pcall(function()
            EnableAutoUppercut(state)
        end)
    end
})

--// ===============================
--// SKY CHANGER [NEW] TAB
--// ===============================

local SkyTab = Window:Tab({
    Title = "Sky Changer [New]",
    Icon = "sun",
})

local SkyEnabled = false
local ParticleInstance = nil
local SkyInstance = nil

local function EnableSkyChanger()
    if SkyEnabled then return end
    SkyEnabled = true

    local Lighting = game:GetService("Lighting")
    local Camera = workspace.CurrentCamera

    -- Remove old sky if exists
    for _, v in ipairs(Lighting:GetChildren()) do
        if v:IsA("Sky") then
            v:Destroy()
        end
    end

    -- Create new purple sky
    local sky = Instance.new("Sky")
    sky.Name = "VibeSky"
    sky.Parent = Lighting
    sky.SkyboxBk = "http://www.roblox.com/asset/?id=5705578216"
    sky.SkyboxDn = "http://www.roblox.com/asset/?id=5705578216"
    sky.SkyboxFt = "http://www.roblox.com/asset/?id=5705578216"
    sky.SkyboxLf = "http://www.roblox.com/asset/?id=5705578216"
    sky.SkyboxRt = "http://www.roblox.com/asset/?id=5705578216"
    sky.SkyboxUp = "http://www.roblox.com/asset/?id=5705578216"
    SkyInstance = sky

    -- Purple lighting vibe
    Lighting.Ambient = Color3.fromRGB(150, 0, 255)
    Lighting.OutdoorAmbient = Color3.fromRGB(80, 0, 120)
    Lighting.ColorShift_Top = Color3.fromRGB(255, 0, 255)
    Lighting.FogColor = Color3.fromRGB(120, 0, 200)
    Lighting.FogEnd = 400

    -- Soft falling particles
    local particle = Instance.new("ParticleEmitter")
    particle.Texture = "rbxassetid://3335642267"
    particle.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(200, 150, 255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(150, 0, 255))
    }
    particle.LightEmission = 0.6
    particle.Rate = 40
    particle.Lifetime = NumberRange.new(5, 10)
    particle.Speed = NumberRange.new(0.5, 1.5)
    particle.VelocitySpread = 20
    particle.Rotation = NumberRange.new(0, 360)
    particle.RotSpeed = NumberRange.new(5, 15)
    particle.Size = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 1),
        NumberSequenceKeypoint.new(1, 0.5)
    }
    particle.Transparency = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 0),
        NumberSequenceKeypoint.new(0.8, 0.2),
        NumberSequenceKeypoint.new(1, 1)
    }
    particle.LockedToPart = false
    particle.Parent = Camera
    ParticleInstance = particle
end

local function DisableSkyChanger()
    if not SkyEnabled then return end
    SkyEnabled = false

    -- Remove sky and particle
    if SkyInstance then
        SkyInstance:Destroy()
        SkyInstance = nil
    end
    if ParticleInstance then
        ParticleInstance:Destroy()
        ParticleInstance = nil
    end

    -- Restore default lighting (optional)
    local Lighting = game:GetService("Lighting")
    Lighting.Ambient = Color3.fromRGB(192, 192, 192)
    Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
    Lighting.ColorShift_Top = Color3.fromRGB(0, 0, 0)
    Lighting.FogColor = Color3.fromRGB(192, 192, 192)
    Lighting.FogEnd = 1000
end

SkyTab:Toggle({
    Title = "Cool Sky Changer",
    Desc = "Activates client-sided purple sky + falling particles",
    Value = false,
    Callback = function(state)
        if state then
            EnableSkyChanger()
        else
            DisableSkyChanger()
        end
    end
})

--// ===============================
--// ANTI TAB
--// ===============================

local AntiTab = Window:Tab({
    Title = "Anti",
    Icon = "shield",
})

local AntiSaitamaEnabled = false

-- Storage for connections so we can cleanly disable
local AntiConnections = {}
local Watching = {}

local function DisconnectAllAnti()
    for _, conn in ipairs(AntiConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiConnections = {}
    Watching = {}
end

local function EnableAntiSaitama()
    if AntiSaitamaEnabled then return end
    AntiSaitamaEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")

    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end

    table.insert(AntiConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end

        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp, tweenInfo,
            {CFrame = hrp.CFrame * CFrame.new(0, 0, dist)}
        )

        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end

        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682"

        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Saitama uppercut animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if Watching[plr] then return end
        Watching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12510170988" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude

                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn connect
        table.insert(AntiConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiSaitama()
    if not AntiSaitamaEnabled then return end
    AntiSaitamaEnabled = false

    DisconnectAllAnti()
end

AntiTab:Toggle({
    Title = "Anti Uppercut (Saitama)",
    Desc = "Avoids being hit by Saitama uppercut animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiSaitama()
        else
            DisableAntiSaitama()
        end
    end
})

-- Storage for connections so we can cleanly disable
local AntiConnections = {}
local Watching = {}
local AntiDownslamEnabled = false

local function DisconnectAllAnti()
    for _, conn in ipairs(AntiConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiConnections = {}
    Watching = {}
end

local function EnableAntiDownslam()
    if AntiDownslamEnabled then return end
    AntiDownslamEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")

    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {CFrame = hrp.CFrame * CFrame.new(0, 0, dist)})
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682" -- your own safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Downslam animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if Watching[plr] then return end
        Watching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://10470104242" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn connect
        table.insert(AntiConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiDownslam()
    if not AntiDownslamEnabled then return end
    AntiDownslamEnabled = false
    DisconnectAllAnti()
end

-- Anti Tab Toggle
AntiTab:Toggle({
    Title = "Anti Downslam",
    Desc = "Avoids being hit by Downslam animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiDownslam()
        else
            DisableAntiDownslam()
        end
    end
})

-- Storage for connections so we can cleanly disable
local AntiConnections = {}
local Watching = {}
local AntiUppercutEnabled = false

local function DisconnectAllAnti()
    for _, conn in ipairs(AntiConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiConnections = {}
    Watching = {}
end

local function EnableAntiUppercut()
    if AntiUppercutEnabled then return end
    AntiUppercutEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")

    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(0, 0, dist) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682"
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for *uppercut* animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if Watching[plr] then return end
        Watching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    -- NEW: Detect uppercut animation
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://10503381238" then
                        
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude

                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiConnections, conn)
        end

        if plr.Character then setup(plr.Character) end

        table.insert(AntiConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then
            watchPlayer(plr)
        end
    end

    table.insert(AntiConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then
            watchPlayer(plr)
        end
    end))
end

local function DisableAntiUppercut()
    if not AntiUppercutEnabled then return end
    AntiUppercutEnabled = false
    DisconnectAllAnti()
end

-- Anti Tab Toggle
AntiTab:Toggle({
    Title = "Anti Uppercut",
    Desc = "Avoid being uppercut",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiUppercut()
        else
            DisableAntiUppercut()
        end
    end
})

-- Storage for connections so we can cleanly disable
local AntiConnections = {}
local Watching = {}
local AntiNormalPunchEnabled = false

local function DisconnectAllAnti()
    for _, conn in ipairs(AntiConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiConnections = {}
    Watching = {}
end

local function EnableAntiNormalPunch()
    if AntiNormalPunchEnabled then return end
    AntiNormalPunchEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")

    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp, 
            tweenInfo, 
            { CFrame = hrp.CFrame * CFrame.new(0, 0, dist) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682"
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    ------------------------------------------------------
    -- Watch for *Saitama NORMAL PUNCH* animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if Watching[plr] then return end
        Watching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    -- Detect normal punch animation
                    if track.Animation 
                        and track.Animation.AnimationId == "rbxassetid://10468665991" then
                    
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiConnections, conn)
        end

        if plr.Character then setup(plr.Character) end

        table.insert(AntiConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiNormalPunch()
    if not AntiNormalPunchEnabled then return end
    AntiNormalPunchEnabled = false
    DisconnectAllAnti()
end

-- Anti Tab Toggle
AntiTab:Toggle({
    Title = "Anti Normal Punch",
    Desc = "avoid getting hit by Saitama normal punch",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiNormalPunch()
        else
            DisableAntiNormalPunch()
        end
    end
})

-- ================================
-- ANTI SHOVE SYSTEM
-- ================================
local AntiShoveConnections = {}
local ShoveWatching = {}
local AntiShoveEnabled = false

local function DisconnectAllShove()
    for _, conn in ipairs(AntiShoveConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiShoveConnections = {}
    ShoveWatching = {}
end

local function EnableAntiShove()
    if AntiShoveEnabled then return end
    AntiShoveEnabled = true

    --------------------------------
    -- Services
    --------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")

    local player = Players.LocalPlayer

    local char, hum, hrp

    --------------------------------
    -- Character loader
    --------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiShoveConnections, player.CharacterAdded:Connect(loadChar))

    --------------------------------
    -- Tweener
    --------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {
            CFrame = hrp.CFrame * CFrame.new(0, 0, dist)
        })
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    --------------------------------
    -- Play your safe anim
    --------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682"
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    --------------------------------
    -- Player Watching
    --------------------------------
    local function watchPlayer(plr)
        if ShoveWatching[plr] then return end
        ShoveWatching[plr] = true

        local function setup(char2)
            local h = char2:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    -- SHOVE ANIMATION ID
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://10471336737" then
                        if hrp and char2:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char2.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiShoveConnections, conn)
        end

        if plr.Character then setup(plr.Character) end

        table.insert(AntiShoveConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    --------------------------------
    -- Watch all players
    --------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiShoveConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiShove()
    if not AntiShoveEnabled then return end
    AntiShoveEnabled = false
    DisconnectAllShove()
end

-- ================================
-- GUI Toggle
-- ================================
AntiTab:Toggle({
    Title = "Anti Shove",
    Desc = "Avoid being shoved by Saitama",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiShove()
        else
            DisableAntiShove()
        end
    end
})

-- ================================
-- ANTI FLOWING WATER SYSTEM
-- ================================
local AntiFlowingConnections = {}
local FlowingWatching = {}
local AntiFlowingEnabled = false

local function DisconnectAllFlowing()
    for _, conn in ipairs(AntiFlowingConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiFlowingConnections = {}
    FlowingWatching = {}
end

local function EnableAntiFlowing()
    if AntiFlowingEnabled then return end
    AntiFlowingEnabled = true

    --------------------------------
    -- Services
    --------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    --------------------------------
    -- Safe character loader
    --------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiFlowingConnections, player.CharacterAdded:Connect(loadChar))

    --------------------------------
    -- Safe backward tween
    --------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {
            CFrame = hrp.CFrame * CFrame.new(0, 0, dist)
        })
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    --------------------------------
    -- Safe animation player
    --------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682" -- your own safe animation
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    --------------------------------
    -- Watch a player for Flowing Water animation
    --------------------------------
    local function watchPlayer(plr)
        if FlowingWatching[plr] then return end
        FlowingWatching[plr] = true

        local function setup(char2)
            local h = char2:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12272894215" then
                        if hrp and char2:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char2.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiFlowingConnections, conn)
        end

        if plr.Character then setup(plr.Character) end
        table.insert(AntiFlowingConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    --------------------------------
    -- Watch all players
    --------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiFlowingConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiFlowing()
    if not AntiFlowingEnabled then return end
    AntiFlowingEnabled = false
    DisconnectAllFlowing()
end

-- ================================
-- GUI Toggle
-- ================================
AntiTab:Toggle({
    Title = "Anti Flowing Water",
    Desc = "Avoid being hit by Flowing Water animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiFlowing()
        else
            DisableAntiFlowing()
        end
    end
})

-- ================================
-- ANTI LETHAL SYSTEM
-- ================================
local AntiLethalConnections = {}
local LethalWatching = {}
local AntiLethalEnabled = false

local function DisconnectAllLethal()
    for _, conn in ipairs(AntiLethalConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiLethalConnections = {}
    LethalWatching = {}
end

local function EnableAntiLethal()
    if AntiLethalEnabled then return end
    AntiLethalEnabled = true

    --------------------------------
    -- Services
    --------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    --------------------------------
    -- Safe character loader
    --------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiLethalConnections, player.CharacterAdded:Connect(loadChar))

    --------------------------------
    -- Safe backward tween
    --------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {
            CFrame = hrp.CFrame * CFrame.new(0, 0, dist)
        })
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    --------------------------------
    -- Safe animation player
    --------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682" -- your safe animation
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    --------------------------------
    -- Watch a player for Lethal animation
    --------------------------------
    local function watchPlayer(plr)
        if LethalWatching[plr] then return end
        LethalWatching[plr] = true

        local function setup(char2)
            local h = char2:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12296882427" then
                        if hrp and char2:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char2.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiLethalConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end
        table.insert(AntiLethalConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    --------------------------------
    -- Watch all players
    --------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiLethalConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiLethal()
    if not AntiLethalEnabled then return end
    AntiLethalEnabled = false
    DisconnectAllLethal()
end

-- ================================
-- GUI Toggle
-- ================================
AntiTab:Toggle({
    Title = "Anti Lethal",
    Desc = "Avoid being hit by Lethal animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiLethal()
        else
            DisableAntiLethal()
        end
    end
})

-- ================================
-- ANTI HUNTER GRASP SYSTEM
-- ================================
local AntiHunterConnections = {}
local HunterWatching = {}
local AntiHunterEnabled = false

local function DisconnectAllHunter()
    for _, conn in ipairs(AntiHunterConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiHunterConnections = {}
    HunterWatching = {}
end

local function EnableAntiHunter()
    if AntiHunterEnabled then return end
    AntiHunterEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiHunterConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {CFrame = hrp.CFrame * CFrame.new(0, 0, dist)})
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682" -- your safe animation
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Hunter Grasp animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if HunterWatching[plr] then return end
        HunterWatching[plr] = true

        local function setup(char2)
            local h = char2:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12307656616" then
                        if hrp and char2:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char2.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiHunterConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end
        table.insert(AntiHunterConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiHunterConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiHunter()
    if not AntiHunterEnabled then return end
    AntiHunterEnabled = false
    DisconnectAllHunter()
end

-- Anti Tab Toggle
AntiTab:Toggle({
    Title = "Anti Hunter Grasp",
    Desc = "Avoid being hit by Hunter Grasp",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiHunter()
        else
            DisableAntiHunter()
        end
    end
})

-- Anti Counter (Garou) full script for Wind UI
-- Add this inside your AntiTab

-- STATE
local AntiCounterEnabled = false
local AntiConnections = {}
local Watching = {}

-- Clean disconnect function
local function DisconnectAllAnti()
    for _, conn in ipairs(AntiConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiConnections = {}
    Watching = {}
end

-- Enable Anti Counter
local function EnableAntiCounter()
    if AntiCounterEnabled then return end
    AntiCounterEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Screen cover
    ------------------------------------------------------
    local function coverScreen()
        local gui = Instance.new("ScreenGui")
        gui.IgnoreGuiInset = true
        gui.ResetOnSpawn = false
        gui.Parent = player:WaitForChild("PlayerGui")

        local frame = Instance.new("Frame")
        frame.BackgroundColor3 = Color3.new(0, 0, 0)
        frame.Size = UDim2.new(1, 0, 1, 0)
        frame.Position = UDim2.new(0, 0, 0, 0)
        frame.Parent = gui

        task.delay(1, function()
            gui:Destroy()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Garou counter
    ------------------------------------------------------
    local function watchPlayer(plr)
        if Watching[plr] then return end
        Watching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12351854556" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                -- Trigger everything
                                playMyAnimation()
                                tweenLeft(18)
                                coverScreen()
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn
        table.insert(AntiConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    table.insert(AntiConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Counter
local function DisableAntiCounter()
    if not AntiCounterEnabled then return end
    AntiCounterEnabled = false
    DisconnectAllAnti()
end

-- Add Wind UI toggle
AntiTab:Toggle({
    Title = "Anti Counter (Garou)",
    Desc = "Avoid being hit by Garou counter animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiCounter()
        else
            DisableAntiCounter()
        end
    end
})

-- Anti Ragdoll (Wind UI)
-- Adds a toggle in the Anti tab
local AntiRagdollEnabled = false
local RagdollConnections = {}

local DETECTION_RADIUS = 9 -- studs
local DURATION = 1 -- seconds

local TARGET_ANIMS = {
    "rbxassetid://13294471966",
    "rbxassetid://10469643643",
    "rbxassetid://13295936866",
    "rbxassetid://13378708199",
    "rbxassetid://14136436157",
    "rbxassetid://15162694192",
    "rbxassetid://16552234590",
    "rbxassetid://17889290569"
}

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Anti-ragdoll function
local function activateAntiRagdoll(character)
    local humanoid = character:FindFirstChild("Humanoid")
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not hrp then return end

    local active = true
    local connection
    connection = RunService.Heartbeat:Connect(function()
        if not active then
            connection:Disconnect()
            return
        end
        humanoid.PlatformStand = false
        humanoid.Sit = false
        humanoid.AutoRotate = true
        hrp.Velocity = Vector3.new(0,0,0)
        hrp.RotVelocity = Vector3.new(0,0,0)
        hrp.CFrame = CFrame.new(hrp.Position, hrp.Position + hrp.CFrame.LookVector)
    end)

    task.delay(DURATION, function()
        active = false
    end)
end

-- Check nearby
local function isNearby(hrp)
    local myHRP = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if myHRP and hrp then
        return (myHRP.Position - hrp.Position).Magnitude <= DETECTION_RADIUS
    end
    return false
end

-- Watch other players
local function watchPlayer(other)
    if other == player then return end

    local function setupChar(character)
        local humanoid = character:WaitForChild("Humanoid")
        local conn = humanoid.AnimationPlayed:Connect(function(track)
            if not AntiRagdollEnabled then return end
            if track.Animation and table.find(TARGET_ANIMS, track.Animation.AnimationId) then
                local hrp = character:FindFirstChild("HumanoidRootPart")
                if hrp and isNearby(hrp) then
                    if player.Character then
                        activateAntiRagdoll(player.Character)
                    end
                end
            end
        end)
        table.insert(RagdollConnections, conn)
    end

    if other.Character then setupChar(other.Character) end
    local charAddedConn = other.CharacterAdded:Connect(setupChar)
    table.insert(RagdollConnections, charAddedConn)
end

-- Connect all players
local function connectAllPlayers()
    for _, p in ipairs(Players:GetPlayers()) do
        watchPlayer(p)
    end
    table.insert(RagdollConnections, Players.PlayerAdded:Connect(watchPlayer))
end

local function disconnectAllRagdoll()
    for _, conn in ipairs(RagdollConnections) do
        pcall(function() conn:Disconnect() end)
    end
    RagdollConnections = {}
end

-- Add toggle in Anti tab
AntiTab:Toggle({
    Title = "Anti Ragdoll",
    Desc = "Avoid ragdoll or knockback from nearby players",
    Value = false,
    Callback = function(state)
        AntiRagdollEnabled = state
        if state then
            connectAllPlayers()
        else
            disconnectAllRagdoll()
        end
    end
})

-- ================================
-- ANTI MACHINE BLOW SYSTEM
-- ================================
local AntiMachineBlowConnections = {}
local MachineBlowWatching = {}
local AntiMachineBlowEnabled = false

local function DisconnectAllMachineBlow()
    for _, conn in ipairs(AntiMachineBlowConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiMachineBlowConnections = {}
    MachineBlowWatching = {}
end

local function EnableAntiMachineBlow()
    if AntiMachineBlowEnabled then return end
    AntiMachineBlowEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiMachineBlowConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {
            CFrame = hrp.CFrame * CFrame.new(0, 0, dist)
        })
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682" -- safe animation (same as other antis)
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Machine Blow animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if MachineBlowWatching[plr] then return end
        MachineBlowWatching[plr] = true

        local function setup(char2)
            local h = char2:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12534735382" then
                        if hrp and char2:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char2.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiMachineBlowConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiMachineBlowConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiMachineBlowConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiMachineBlow()
    if not AntiMachineBlowEnabled then return end
    AntiMachineBlowEnabled = false
    DisconnectAllMachineBlow()
end

-- ================================
-- GUI Toggle
-- ================================
AntiTab:Toggle({
    Title = "Anti Machine Blow",
    Desc = "Avoid being hit by Machine Blow animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiMachineBlow()
        else
            DisableAntiMachineBlow()
        end
    end
})

-- ================================
-- ANTI BLITZ SHOT SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiBlitzShotEnabled = false
local AntiBlitzConnections = {}
local BlitzWatching = {}

-- Clean disconnect function
local function DisconnectAllBlitz()
    for _, conn in ipairs(AntiBlitzConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiBlitzConnections = {}
    BlitzWatching = {}
end

-- Enable Anti Blitz Shot
local function EnableAntiBlitzShot()
    if AntiBlitzShotEnabled then return end
    AntiBlitzShotEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiBlitzConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
    if not hrp then return end
    -- super fast tween
    local tweenInfo = TweenInfo.new(0.02, Enum.EasingStyle.Linear)
    local tween = TweenService:Create(
        hrp,
        tweenInfo,
        { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
    )
    pcall(function()
        tween:Play()
        tween.Completed:Wait()
    end)
end

    ------------------------------------------------------
    -- Screen cover (flash / impact simulation)
    ------------------------------------------------------
    local function coverScreen()
        local gui = Instance.new("ScreenGui")
        gui.IgnoreGuiInset = true
        gui.ResetOnSpawn = false
        gui.Parent = player:WaitForChild("PlayerGui")

        local frame = Instance.new("Frame")
        frame.BackgroundColor3 = Color3.new(0, 0, 0)
        frame.Size = UDim2.new(1, 0, 1, 0)
        frame.Position = UDim2.new(0, 0, 0, 0)
        frame.Parent = gui

        task.delay(1, function()
            gui:Destroy()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation (same as Anti Counter)
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Blitz Shot animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if BlitzWatching[plr] then return end
        BlitzWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12618292188" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 100 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                                coverScreen()
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiBlitzConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiBlitzConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiBlitzConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Blitz Shot
local function DisableAntiBlitzShot()
    if not AntiBlitzShotEnabled then return end
    AntiBlitzShotEnabled = false
    DisconnectAllBlitz()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Blitz Shot",
    Desc = "Avoid being hit by Blitz Shot (wide range dodge + screen flash)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiBlitzShot()
        else
            DisableAntiBlitzShot()
        end
    end
})

-- ================================
-- ANTI IGNITION BURST SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiIgnitionBurstEnabled = false
local AntiIgnitionConnections = {}
local IgnitionWatching = {}

-- Clean disconnect function
local function DisconnectAllIgnition()
    for _, conn in ipairs(AntiIgnitionConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiIgnitionConnections = {}
    IgnitionWatching = {}
end

-- Enable Anti Ignition Burst
local function EnableAntiIgnitionBurst()
    if AntiIgnitionBurstEnabled then return end
    AntiIgnitionBurstEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiIgnitionConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation (same as before)
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Ignition Burst animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if IgnitionWatching[plr] then return end
        IgnitionWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://12509505723" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 50 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiIgnitionConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiIgnitionConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiIgnitionConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Ignition Burst
local function DisableAntiIgnitionBurst()
    if not AntiIgnitionBurstEnabled then return end
    AntiIgnitionBurstEnabled = false
    DisconnectAllIgnition()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Ignition Burst",
    Desc = "Dodge Ignition Burst (50 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiIgnitionBurst()
        else
            DisableAntiIgnitionBurst()
        end
    end
})

-- ================================
-- ANTI FLASH STRIKE SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiFlashStrikeEnabled = false
local AntiFlashConnections = {}
local FlashWatching = {}

-- Clean disconnect function
local function DisconnectAllFlash()
    for _, conn in ipairs(AntiFlashConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiFlashConnections = {}
    FlashWatching = {}
end

-- Enable Anti Flash Strike
local function EnableAntiFlashStrike()
    if AntiFlashStrikeEnabled then return end
    AntiFlashStrikeEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiFlashConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Flash Strike animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if FlashWatching[plr] then return end
        FlashWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://13376869471" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 30 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiFlashConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiFlashConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiFlashConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Flash Strike
local function DisableAntiFlashStrike()
    if not AntiFlashStrikeEnabled then return end
    AntiFlashStrikeEnabled = false
    DisconnectAllFlash()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Flash Strike",
    Desc = "Dodge Flash Strike (30 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiFlashStrike()
        else
            DisableAntiFlashStrike()
        end
    end
})

-- ================================
-- ANTI WHIRLWIND KICK SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiWhirlwindKickEnabled = false
local AntiWhirlwindConnections = {}
local WhirlwindWatching = {}

-- Clean disconnect function
local function DisconnectAllWhirlwind()
    for _, conn in ipairs(AntiWhirlwindConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiWhirlwindConnections = {}
    WhirlwindWatching = {}
end

-- Enable Anti Whirlwind Kick
local function EnableAntiWhirlwindKick()
    if AntiWhirlwindKickEnabled then return end
    AntiWhirlwindKickEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiWhirlwindConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Whirlwind Kick animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if WhirlwindWatching[plr] then return end
        WhirlwindWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://13294790250" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 30 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiWhirlwindConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiWhirlwindConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiWhirlwindConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Whirlwind Kick
local function DisableAntiWhirlwindKick()
    if not AntiWhirlwindKickEnabled then return end
    AntiWhirlwindKickEnabled = false
    DisconnectAllWhirlwind()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Whirlwind Kick",
    Desc = "Dodge Whirlwind Kick (30 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiWhirlwindKick()
        else
            DisableAntiWhirlwindKick()
        end
    end
})

-- ================================
-- ANTI EXPLOSION BOMB (SONIC) SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiExplosionBombEnabled = false
local AntiExplosionConnections = {}
local ExplosionWatching = {}

-- Clean disconnect function
local function DisconnectAllExplosion()
    for _, conn in ipairs(AntiExplosionConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiExplosionConnections = {}
    ExplosionWatching = {}
end

-- Enable Anti Explosion Bomb
local function EnableAntiExplosionBomb()
    if AntiExplosionBombEnabled then return end
    AntiExplosionBombEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiExplosionConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Explosion Bomb animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if ExplosionWatching[plr] then return end
        ExplosionWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and (
                        track.Animation.AnimationId == "rbxassetid://13556985475" or
                        track.Animation.AnimationId == "rbxassetid://13501296372"
                    ) then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 30 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiExplosionConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiExplosionConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiExplosionConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Explosion Bomb
local function DisableAntiExplosionBomb()
    if not AntiExplosionBombEnabled then return end
    AntiExplosionBombEnabled = false
    DisconnectAllExplosion()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Explosion Bomb (Sonic)",
    Desc = "Dodge Sonic's Explosion Bomb (30 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiExplosionBomb()
        else
            DisableAntiExplosionBomb()
        end
    end
})

-- ================================
-- ANTI BEATDOWN SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiBeatdownEnabled = false
local AntiBeatdownConnections = {}
local BeatdownWatching = {}

-- Clean disconnect function
local function DisconnectAllBeatdown()
    for _, conn in ipairs(AntiBeatdownConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiBeatdownConnections = {}
    BeatdownWatching = {}
end

-- Enable Anti Beatdown
local function EnableAntiBeatdown()
    if AntiBeatdownEnabled then return end
    AntiBeatdownEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiBeatdownConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Beatdown animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if BeatdownWatching[plr] then return end
        BeatdownWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://14046756619" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 100 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiBeatdownConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiBeatdownConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiBeatdownConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Beatdown
local function DisableAntiBeatdown()
    if not AntiBeatdownEnabled then return end
    AntiBeatdownEnabled = false
    DisconnectAllBeatdown()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Beatdown",
    Desc = "Dodge Beatdown (100 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiBeatdown()
        else
            DisableAntiBeatdown()
        end
    end
})

-- ================================
-- ANTI FOUL BALL SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiFoulBallEnabled = false
local AntiFoulConnections = {}
local FoulWatching = {}

-- Clean disconnect function
local function DisconnectAllFoul()
    for _, conn in ipairs(AntiFoulConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiFoulConnections = {}
    FoulWatching = {}
end

-- Enable Anti Foul Ball
local function EnableAntiFoulBall()
    if AntiFoulBallEnabled then return end
    AntiFoulBallEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiFoulConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Foul Ball animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if FoulWatching[plr] then return end
        FoulWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://14351441234" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 30 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiFoulConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiFoulConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiFoulConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Foul Ball
local function DisableAntiFoulBall()
    if not AntiFoulBallEnabled then return end
    AntiFoulBallEnabled = false
    DisconnectAllFoul()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Foul Ball",
    Desc = "Dodge Foul Ball (30 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiFoulBall()
        else
            DisableAntiFoulBall()
        end
    end
})

-- ================================
-- ANTI GROUND SLAM SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiGroundSlamEnabled = false
local AntiGroundConnections = {}
local GroundWatching = {}

-- Clean disconnect function
local function DisconnectAllGround()
    for _, conn in ipairs(AntiGroundConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiGroundConnections = {}
    GroundWatching = {}
end

-- Enable Anti Ground Slam
local function EnableAntiGroundSlam()
    if AntiGroundSlamEnabled then return end
    AntiGroundSlamEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiGroundConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Ground Slam animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if GroundWatching[plr] then return end
        GroundWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://14299135500" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 50 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiGroundConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiGroundConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiGroundConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Ground Slam
local function DisableAntiGroundSlam()
    if not AntiGroundSlamEnabled then return end
    AntiGroundSlamEnabled = false
    DisconnectAllGround()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Ground Slam",
    Desc = "Dodge Ground Slam (50 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiGroundSlam()
        else
            DisableAntiGroundSlam()
        end
    end
})

-- ================================
-- ANTI QUICK SLICE SYSTEM
-- ================================
local AntiQuickSliceConnections = {}
local QuickSliceWatching = {}
local AntiQuickSliceEnabled = false

local function DisconnectAllQuickSlice()
    for _, conn in ipairs(AntiQuickSliceConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiQuickSliceConnections = {}
    QuickSliceWatching = {}
end

local function EnableAntiQuickSlice()
    if AntiQuickSliceEnabled then return end
    AntiQuickSliceEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiQuickSliceConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Safe backward tween
    ------------------------------------------------------
    local function tweenBackward(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, tweenInfo, {
            CFrame = hrp.CFrame * CFrame.new(0, 0, dist)
        })
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation player
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10491993682" -- safe animation (same as Machine Blow)
        pcall(function()
            hum:LoadAnimation(anim):Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Quick Slice animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if QuickSliceWatching[plr] then return end
        QuickSliceWatching[plr] = true

        local function setup(char2)
            local h = char2:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://15290930205" then
                        if hrp and char2:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char2.HumanoidRootPart.Position).Magnitude
                            if dist <= 60 then
                                playMyAnimation()
                                tweenBackward(18)
                                task.wait(0.6)
                                tweenBackward(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiQuickSliceConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiQuickSliceConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiQuickSliceConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

local function DisableAntiQuickSlice()
    if not AntiQuickSliceEnabled then return end
    AntiQuickSliceEnabled = false
    DisconnectAllQuickSlice()
end

-- ================================
-- GUI Toggle
-- ================================
AntiTab:Toggle({
    Title = "Anti Quick Slice",
    Desc = "Avoid being hit by Quick Slice animation",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiQuickSlice()
        else
            DisableAntiQuickSlice()
        end
    end
})

-- ================================
-- ANTI ATMOS CLEAVE SYSTEM
-- ================================
-- Add this inside your AntiTab section

-- STATE
local AntiAtmosCleaveEnabled = false
local AntiAtmosConnections = {}
local AtmosWatching = {}

-- Clean disconnect function
local function DisconnectAllAtmos()
    for _, conn in ipairs(AntiAtmosConnections) do
        pcall(function() conn:Disconnect() end)
    end
    AntiAtmosConnections = {}
    AtmosWatching = {}
end

-- Enable Anti Atmos Cleave
local function EnableAntiAtmosCleave()
    if AntiAtmosCleaveEnabled then return end
    AntiAtmosCleaveEnabled = true

    ------------------------------------------------------
    -- Services
    ------------------------------------------------------
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local player = Players.LocalPlayer

    local char, hum, hrp

    ------------------------------------------------------
    -- Safe character loader
    ------------------------------------------------------
    local function loadChar(c)
        char = c
        pcall(function()
            hum = char:WaitForChild("Humanoid")
            hrp = char:WaitForChild("HumanoidRootPart")
        end)
    end

    if player.Character then loadChar(player.Character) end
    table.insert(AntiAtmosConnections, player.CharacterAdded:Connect(loadChar))

    ------------------------------------------------------
    -- Tween left movement (side dodge)
    ------------------------------------------------------
    local function tweenLeft(dist)
        if not hrp then return end
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(
            hrp,
            tweenInfo,
            { CFrame = hrp.CFrame * CFrame.new(-dist, 0, 0) }
        )
        pcall(function()
            tween:Play()
            tween.Completed:Wait()
        end)
    end

    ------------------------------------------------------
    -- Safe animation play
    ------------------------------------------------------
    local function playMyAnimation()
        if not hum then return end
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://10480796021" -- safe animation
        pcall(function()
            local track = hum:LoadAnimation(anim)
            track:Play()
        end)
    end

    ------------------------------------------------------
    -- Watch a player for Atmos Cleave animation
    ------------------------------------------------------
    local function watchPlayer(plr)
        if AtmosWatching[plr] then return end
        AtmosWatching[plr] = true

        local function setup(char)
            local h = char:FindFirstChild("Humanoid")
            if not h then return end

            local conn = h.AnimationPlayed:Connect(function(track)
                pcall(function()
                    if track.Animation and track.Animation.AnimationId == "rbxassetid://15145462680" then
                        if hrp and char:FindFirstChild("HumanoidRootPart") then
                            local dist = (hrp.Position - char.HumanoidRootPart.Position).Magnitude
                            if dist <= 20 then
                                -- Trigger countermeasures
                                playMyAnimation()
                                tweenLeft(18)
                            end
                        end
                    end
                end)
            end)

            table.insert(AntiAtmosConnections, conn)
        end

        -- Existing character
        if plr.Character then setup(plr.Character) end

        -- Respawn handling
        table.insert(AntiAtmosConnections, plr.CharacterAdded:Connect(function(c)
            pcall(function() setup(c) end)
        end))
    end

    ------------------------------------------------------
    -- Watch all current players
    ------------------------------------------------------
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then watchPlayer(plr) end
    end

    ------------------------------------------------------
    -- Watch new players
    ------------------------------------------------------
    table.insert(AntiAtmosConnections, Players.PlayerAdded:Connect(function(plr)
        if plr ~= player then watchPlayer(plr) end
    end))
end

-- Disable Anti Atmos Cleave
local function DisableAntiAtmosCleave()
    if not AntiAtmosCleaveEnabled then return end
    AntiAtmosCleaveEnabled = false
    DisconnectAllAtmos()
end

-- ================================
-- GUI Toggle (add to AntiTab)
-- ================================
AntiTab:Toggle({
    Title = "Anti Atmos Cleave",
    Desc = "Dodge Atmos Cleave (20 studs range)",
    Value = false,
    Callback = function(state)
        if state then
            EnableAntiAtmosCleave()
        else
            DisableAntiAtmosCleave()
        end
    end
})

--// ===============================
--// SLICK BACK TECH TAB (Textbox version)
--// ===============================

local SlickTab = Window:Tab({
    Title = "Slick Back Tech",
    Icon  = "arrowleft"
})

--// STATE
local slickEnabled   = false
local jumpHeight     = 20
local character, humanoid, hrp = nil, nil, nil
local TARGET_ANIM = "rbxassetid://10503381238"

-- Services
local Players      = game:GetService("Players")
local RunService   = game:GetService("RunService")
local Vim          = game:GetService("VirtualInputManager")
local player       = Players.LocalPlayer

-- =========================
-- CLOSEST TARGET FUNCTION
-- =========================
local function GetClosestTarget()
    if not hrp then return nil end
    local closestHRP, shortest = nil, math.huge
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("Model") and obj ~= character then
            local h = obj:FindFirstChildOfClass("Humanoid")
            local tHRP = obj:FindFirstChild("HumanoidRootPart")
            if h and h.Health > 0 and tHRP then
                local dist = (hrp.Position - tHRP.Position).Magnitude
                if dist < shortest then
                    shortest = dist
                    closestHRP = tHRP
                end
            end
        end
    end
    return closestHRP
end

-- =========================
-- SETUP CHARACTER + ANIMATION
-- =========================
local function setupCharacter(char)
    character = char
    humanoid  = char:WaitForChild("Humanoid")
    hrp       = char:WaitForChild("HumanoidRootPart")

    -- Animation detection
    humanoid.AnimationPlayed:Connect(function(track)
        if not slickEnabled then return end
        if not (track.Animation and track.Animation.AnimationId == TARGET_ANIM) then return end

        task.wait(0.3)

        -- Lock AutoRotate
        humanoid.AutoRotate = false
        local lock  
        lock = humanoid:GetPropertyChangedSignal("AutoRotate"):Connect(function()  
            humanoid.AutoRotate = false  
        end)  

        -- Get target
        local targetHRP = GetClosestTarget()
        if not targetHRP then
            humanoid.AutoRotate = true
            lock:Disconnect()
            return
        end

        -- Hard face-lock loop
        local start = tick()
        local loop
        loop = RunService.RenderStepped:Connect(function()
            if tick() - start >= 1 then
                loop:Disconnect()
                humanoid.AutoRotate = true
                lock:Disconnect()
                return
            end
            if targetHRP then
                hrp.CFrame = CFrame.lookAt(hrp.Position, targetHRP.Position)
            end
        end)

        -- VirtualInputManager Q x2
        for i = 1, 2 do
            Vim:SendKeyEvent(true, Enum.KeyCode.Q, false, game)
            task.wait(0.05)
            Vim:SendKeyEvent(false, Enum.KeyCode.Q, false, game)
        end

        -- LinearVelocity upward boost
        local lv = Instance.new("LinearVelocity")
        lv.MaxForce = math.huge
        lv.VectorVelocity = Vector3.new(0, jumpHeight, 0)
        lv.Attachment0 = Instance.new("Attachment", hrp)
        lv.Parent = hrp
        task.wait(0.1)
        lv:Destroy()
    end)
end

-- Initial setup + respawn handling
if player.Character then setupCharacter(player.Character) end
player.CharacterAdded:Connect(function(char)
    task.wait(0.1)
    setupCharacter(char)
end)

-- =========================
-- GUI ELEMENTS
-- =========================
local Content = SlickTab:Section({
    Title = "Slick Back Tech"
})

Content:Toggle({
    Title = "Enable Slick Back",
    Desc = "Auto slick back on target animation",
    Value = false,
    Callback = function(state)
        slickEnabled = state
    end
})

Content:Input({   -- or :TextInput if your WindUI fork prefers that name
    Title = "Jump Height",
    Placeholder = "Studs (e.g. 20â€“80)",
    Text = tostring(jumpHeight),   -- initial displayed value
    -- Numeric = true,             -- some versions support forcing numbers only
    Callback = function(value)
        local num = tonumber(value)
        if num and num > 0 then
            jumpHeight = num
            print("[Slick Back] Jump height set to:", jumpHeight)
        end
    end

})









